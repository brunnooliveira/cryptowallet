(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{219:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(84),r=s.n(n),c=s(12),i=(s(95),s(2)),o=s(3),l=(s(96),s(97),s(19)),d=s.n(l),j="http://localhost:8080/api/public/",m=function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null},b=s(6),u=s(15),h=s(1),O=function(e){var t=e.history,s=Object(a.useState)(!1),n=Object(i.a)(s,2),r=n[0],c=n[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),m=l[0],O=l[1],p=u.a().shape({username:u.b().required("This field is required!"),password:u.b().required("This field is required!")});return Object(h.jsx)("div",{className:"col-md-12",children:Object(h.jsxs)("div",{className:"card card-container",children:[Object(h.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(h.jsx)(b.d,{initialValues:{username:"",password:""},validationSchema:p,onSubmit:function(e){var s=e.username,a=e.password;O(""),c(!0),function(e,t){return d.a.post(j+"authenticate",{username:e,password:t}).then((function(e){return e.data.token&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}(s,a).then((function(){t.push("/profile"),window.location.reload()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();c(!1),O(t)}))},children:Object(h.jsxs)(b.c,{children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"username",children:"Username"}),Object(h.jsx)(b.b,{name:"username",type:"text",className:"form-control"}),Object(h.jsx)(b.a,{name:"username",component:"div",className:"alert alert-danger"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"password",children:"Password"}),Object(h.jsx)(b.b,{name:"password",type:"password",className:"form-control"}),Object(h.jsx)(b.a,{name:"password",component:"div",className:"alert alert-danger"})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("button",{type:"submit",className:"btn btn-primary btn-block",disabled:r,children:[r&&Object(h.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(h.jsx)("span",{children:"Login"})]})}),m&&Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("div",{className:"alert alert-danger",role:"alert",children:m})})]})})]})})},p=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),s=t[0],n=t[1],r=Object(a.useState)(""),c=Object(i.a)(r,2),o=c[0],l=c[1],m=u.a().shape({username:u.b().test("len","The username must be between 3 and 20 characters.",(function(e){return e&&e.toString().length>=3&&e.toString().length<=20})).required("This field is required!"),email:u.b().email("This is not a valid email.").required("This field is required!"),password:u.b().test("len","The password must be between 6 and 40 characters.",(function(e){return e&&e.toString().length>=6&&e.toString().length<=40})).required("This field is required!")});return Object(h.jsx)("div",{className:"col-md-12",children:Object(h.jsxs)("div",{className:"card card-container",children:[Object(h.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(h.jsx)(b.d,{initialValues:{username:"",email:"",password:""},validationSchema:m,onSubmit:function(e){(function(e,t,s){return d.a.post(j+"register",{username:e,email:t,password:s})})(e.username,e.email,e.password).then((function(e){l(e.data.message),n(!0)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();l(t),n(!1)}))},children:Object(h.jsxs)(b.c,{children:[!s&&Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"username",children:" Username "}),Object(h.jsx)(b.b,{name:"username",type:"text",className:"form-control"}),Object(h.jsx)(b.a,{name:"username",component:"div",className:"alert alert-danger"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"email",children:" Email "}),Object(h.jsx)(b.b,{name:"email",type:"email",className:"form-control"}),Object(h.jsx)(b.a,{name:"email",component:"div",className:"alert alert-danger"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"password",children:" Password "}),Object(h.jsx)(b.b,{name:"password",type:"password",className:"form-control"}),Object(h.jsx)(b.a,{name:"password",component:"div",className:"alert alert-danger"})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Sign Up"})})]}),o&&Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("div",{className:s?"alert alert-success":"alert alert-danger",role:"alert",children:o})})]})})]})})};function x(){var e=localStorage.getItem("user"),t=null;if(e&&(t=JSON.parse(e)),t&&t.accessToken)return t.accessToken}var v="http://localhost:8080/api/test/",g=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),s=t[0],n=t[1];return Object(a.useEffect)((function(){d.a.get(v+"all").then((function(e){n(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();n(t)}))}),[]),Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("header",{className:"jumbotron",children:Object(h.jsx)("h3",{children:s})})})},f=function(){var e=m();return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("header",{className:"jumbotron",children:Object(h.jsxs)("h3",{children:[Object(h.jsx)("strong",{children:e.username})," Profile"]})}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Token:"})," ",e.token.substring(0,20)," ..."," ",e.token.substr(e.token.length-20)]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Id:"})," ",e.id]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Email:"})," ",e.email]}),Object(h.jsx)("strong",{children:"Authorities:"}),Object(h.jsx)("ul",{children:e.roles&&e.roles.map((function(e,t){return Object(h.jsx)("li",{children:e},t)}))})]})},N=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),s=t[0],n=t[1];return Object(a.useEffect)((function(){d.a.get(v+"user",{headers:{Authorization:x()}}).then((function(e){n(e.data)}),(function(e){console.log(e.response);var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();n(t)}))}),[]),Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("header",{className:"jumbotron",children:Object(h.jsx)("h3",{children:s})})})},S={on:function(e,t){document.addEventListener(e,(function(e){return t(e)}))},dispatch:function(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove:function(e,t){document.removeEventListener(e,t)}},w=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),s=t[0],n=t[1];return Object(a.useEffect)((function(){d.a.get(v+"mod",{headers:{Authorization:x()}}).then((function(e){n(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();n(t),e.response&&401===e.response.status&&S.dispatch("logout")}))}),[]),Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("header",{className:"jumbotron",children:Object(h.jsx)("h3",{children:s})})})},k=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),s=t[0],n=t[1];return Object(a.useEffect)((function(){d.a.get(v+"admin",{headers:{Authorization:x()}}).then((function(e){n(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();n(t),e.response&&401===e.response.status&&S.dispatch("logout")}))}),[]),Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("header",{className:"jumbotron",children:Object(h.jsx)("h3",{children:s})})})},y=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),s=t[0],n=t[1],r=Object(a.useState)(!1),l=Object(i.a)(r,2),d=l[0],j=l[1],b=Object(a.useState)(void 0),u=Object(i.a)(b,2),x=u[0],v=u[1];Object(a.useEffect)((function(){var e=m();return e&&v(e),S.on("logout",y),function(){S.remove("logout",y)}}),[]);var y=function(){localStorage.removeItem("user"),n(!1),j(!1),v(void 0)};return Object(h.jsxs)("div",{children:[Object(h.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(h.jsx)(c.b,{to:"/",className:"navbar-brand",children:"CryptoWallet"}),Object(h.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(c.b,{to:"/home",className:"nav-link",children:"Home"})}),s&&Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(c.b,{to:"/mod",className:"nav-link",children:"Moderator Board"})}),d&&Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(c.b,{to:"/admin",className:"nav-link",children:"Admin Board"})}),x&&Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(c.b,{to:"/user",className:"nav-link",children:"User"})})]}),x?Object(h.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(c.b,{to:"/profile",className:"nav-link",children:x.username})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{href:"/login",className:"nav-link",onClick:y,children:"LogOut"})})]}):Object(h.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(c.b,{to:"/login",className:"nav-link",children:"Login"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(c.b,{to:"/register",className:"nav-link",children:"Sign Up"})})]})]}),Object(h.jsx)("div",{className:"container mt-3",children:Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{exact:!0,path:["/","/home"],component:g}),Object(h.jsx)(o.a,{exact:!0,path:"/login",component:O}),Object(h.jsx)(o.a,{exact:!0,path:"/register",component:p}),Object(h.jsx)(o.a,{exact:!0,path:"/profile",component:f}),Object(h.jsx)(o.a,{path:"/user",component:N}),Object(h.jsx)(o.a,{path:"/mod",component:w}),Object(h.jsx)(o.a,{path:"/admin",component:k})]})})]})},T=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,220)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),a(e),n(e),r(e),c(e)}))};r.a.render(Object(h.jsx)(c.a,{children:Object(h.jsx)(y,{})}),document.getElementById("root")),T()},95:function(e,t,s){},97:function(e,t,s){}},[[219,1,2]]]);
//# sourceMappingURL=main.89c23a6f.chunk.js.map